 <!DOCTYPE html><html lang="fr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Carte Interactive MAPAQ - Risques Sanitaires</title><link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" /><link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.css" /><link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.Default.css" /><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"><style>body{margin:0;padding:0;font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;}#map{height:100vh;width:100%;}.map-controls{position:absolute;top:10px;right:10px;z-index:1000;background:white;padding:15px;border-radius:8px;box-shadow:0 2px 10px rgba(0,0,0,0.1);max-width:300px;}.restaurant-popup{min-width:250px;font-size:14px;}.popup-content p{margin:5px 0;}.popup-actions{margin-top:10px;text-align:center;}.popup-actions button{margin:2px;}.legend{position:absolute;bottom:20px;left:20px;z-index:1000;background:white;padding:15px;border-radius:8px;box-shadow:0 2px 10px rgba(0,0,0,0.1);}.legend-item{display:flex;align-items:center;margin:5px 0;}.legend-color{width:20px;height:20px;border-radius:50%;margin-right:10px;}.stats-panel{position:absolute;top:10px;left:10px;z-index:1000;background:white;padding:15px;border-radius:8px;box-shadow:0 2px 10px rgba(0,0,0,0.1);min-width:200px;}:root{--primary-color:#007bff;--secondary-color:#6c757d;--success-color:#28a745;--warning-color:#ffc107;--danger-color:#dc3545;--info-color:#17a2b8;--light-color:#f8f9fa;--dark-color:#343a40;--border-radius:8px;--box-shadow:0 2px 10px rgba(0,0,0,0.1);--transition:all 0.3s ease;--panel-width-desktop:300px;--panel-width-tablet:250px;--panel-width-mobile:100%;}*{box-sizing:border-box;}body{margin:0;padding:0;font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;overflow-x:hidden;}#map{height:100vh;width:100%;position:relative;z-index:1;}.map-panel{position:absolute;background:white;border-radius:var(--border-radius);box-shadow:var(--box-shadow);transition:var(--transition);z-index:1000;max-height:80vh;overflow-y:auto;}.stats-panel{top:10px;left:10px;width:var(--panel-width-desktop);padding:15px;}.map-controls{top:10px;right:10px;width:var(--panel-width-desktop);padding:15px;}.legend{bottom:20px;left:20px;padding:15px;max-width:250px;}@media (max-width:1024px) and (min-width:769px){.stats-panel,.map-controls{width:var(--panel-width-tablet);padding:12px;}.stats-panel{top:5px;left:5px;}.map-controls{top:5px;right:5px;}.legend{bottom:10px;left:10px;padding:12px;}.map-panel{font-size:14px;}.map-panel h5{font-size:16px;margin-bottom:8px;}}@media (max-width:768px){#map{height:60vh;}.map-panel{position:relative;width:100%;margin:5px 0;border-radius:0;box-shadow:0 1px 3px rgba(0,0,0,0.1);}.stats-panel,.map-controls{position:relative;top:auto;left:auto;right:auto;width:100%;padding:10px;margin:0;}.legend{position:relative;bottom:auto;left:auto;width:100%;margin:5px 0;padding:10px;}.mobile-container{display:flex;flex-direction:column;height:100vh;}.mobile-controls{flex:0 0 auto;background:var(--light-color);padding:10px;border-top:1px solid #dee2e6;max-height:40vh;overflow-y:auto;}.hamburger-menu{display:block;position:fixed;top:10px;right:10px;z-index:2000;background:white;border:none;border-radius:50%;width:50px;height:50px;box-shadow:var(--box-shadow);cursor:pointer;transition:var(--transition);}.hamburger-menu:hover{background:var(--light-color);transform:scale(1.05);}.hamburger-menu i{font-size:20px;color:var(--primary-color);}.mobile-menu{position:fixed;top:0;right:-100%;width:80%;max-width:300px;height:100vh;background:white;box-shadow:-2px 0 10px rgba(0,0,0,0.1);transition:right 0.3s ease;z-index:1500;overflow-y:auto;padding:70px 20px 20px;}.mobile-menu.active{right:0;}.mobile-menu-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);z-index:1400;opacity:0;visibility:hidden;transition:var(--transition);}.mobile-menu-overlay.active{opacity:1;visibility:visible;}.close-menu{position:absolute;top:15px;right:15px;background:none;border:none;font-size:24px;color:var(--secondary-color);cursor:pointer;}.map-panel h5{font-size:14px;margin-bottom:8px;}.map-panel{font-size:12px;}.btn-sm{font-size:11px;padding:4px 8px;}}@media (max-width:480px){#map{height:50vh;}.mobile-menu{width:90%;}.hamburger-menu{width:45px;height:45px;}.hamburger-menu i{font-size:18px;}.map-panel{font-size:11px;padding:8px;}.legend-item{margin:3px 0;}.legend-color{width:15px;height:15px;}}.leaflet-popup-content-wrapper{border-radius:var(--border-radius);}@media (max-width:768px){.leaflet-popup-content-wrapper{max-width:250px !important;min-width:200px;}.restaurant-popup{font-size:12px;}.restaurant-popup h3{font-size:14px;margin-bottom:8px;}.popup-actions button{font-size:10px;padding:3px 6px;margin:1px;}}@media (hover:none) and (pointer:coarse){.btn,.form-control,.form-select{min-height:44px;}.hamburger-menu{min-width:44px;min-height:44px;}.form-check{margin:8px 0;}.form-check-input{width:20px;height:20px;}.custom-marker div{width:35px !important;height:35px !important;}}.map-panel{animation:slideIn 0.3s ease-out;}@keyframes slideIn{from{opacity:0;transform:translateY(-10px);}to{opacity:1;transform:translateY(0);}}@media (hover:hover) and (pointer:fine){.btn:hover{transform:translateY(-1px);box-shadow:0 4px 8px rgba(0,0,0,0.15);}.map-panel:hover{box-shadow:0 4px 15px rgba(0,0,0,0.15);}}.btn:focus,.form-control:focus,.form-select:focus{outline:2px solid var(--primary-color);outline-offset:2px;}@media (prefers-reduced-motion:reduce){*{animation-duration:0.01ms !important;animation-iteration-count:1 !important;transition-duration:0.01ms !important;}}@media (prefers-color-scheme:dark){:root{--light-color:#2d3748;--dark-color:#f7fafc;}.map-panel{background:#2d3748;color:#f7fafc;}.mobile-menu{background:#2d3748;color:#f7fafc;}}.d-mobile-none{display:block;}.d-mobile-block{display:none;}@media (max-width:768px){.d-mobile-none{display:none;}.d-mobile-block{display:block;}}.text-mobile-center{text-align:left;}@media (max-width:768px){.text-mobile-center{text-align:center;}}</style></head><body><div class="stats-panel"><h5><i class="fas fa-chart-bar"></i> Statistiques</h5><div id="stats-content"><p><strong>Total restaurants:</strong><span id="total-count">0</span></p><p><strong>Risque critique:</strong><span id="critical-count">0</span></p><p><strong>Risque élevé:</strong><span id="high-count">0</span></p><p><strong>Risque modéré:</strong><span id="medium-count">0</span></p><p><strong>Risque faible:</strong><span id="low-count">0</span></p></div></div><div class="map-controls"><h5><i class="fas fa-sliders-h"></i> Contrôles</h5><div class="mb-3"><label class="form-label">Affichage:</label><div class="form-check"><input class="form-check-input" type="checkbox" id="show-markers" checked><label class="form-check-label" for="show-markers">Marqueurs</label></div><div class="form-check"><input class="form-check-input" type="checkbox" id="show-clusters" checked><label class="form-check-label" for="show-clusters">Clusters</label></div><div class="form-check"><input class="form-check-input" type="checkbox" id="show-heatmap"><label class="form-check-label" for="show-heatmap">Heatmap</label></div></div><div class="mb-3"><label for="risk-filter" class="form-label">Filtrer par risque:</label><select class="form-select" id="risk-filter"><option value="all">Tous les niveaux</option><option value="Critique">Critique uniquement</option><option value="Élevé">Élevé uniquement</option><option value="Modéré">Modéré uniquement</option><option value="Faible">Faible uniquement</option></select></div><button class="btn btn-primary btn-sm" onclick="resetMap()"><i class="fas fa-home"></i> Réinitialiser </button></div><div id="map"></div><div class="legend"><h6><i class="fas fa-info-circle"></i> Niveaux de risque</h6><div class="legend-item"><div class="legend-color" style="background-color: #dc3545;"></div><span>Critique (≥ 0.8)</span></div><div class="legend-item"><div class="legend-color" style="background-color: #fd7e14;"></div><span>Élevé (0.6 - 0.8)</span></div><div class="legend-item"><div class="legend-color" style="background-color: #ffc107;"></div><span>Modéré (0.3 - 0.6)</span></div><div class="legend-item"><div class="legend-color" style="background-color: #28a745;"></div><span>Faible (< 0.3)</span></div></div><script></script><script></script><script></script><script></script><script></script></body></html> 